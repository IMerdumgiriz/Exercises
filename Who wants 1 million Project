// ------------------------------------------------------
import Foundation
// Model QuizBrain
// PARAMETRE ÇAGIRMAK İÇİN BAŞLANGICI struct QuizBrain{ ile attık
struct QuizBrain{
    var quiz = [
        Question(q:"İstiklal marşı hangi kelime ile başlıyor?", a: "Atatürk",a:"Sen",a:"Yurdum",a:"Kan",a:"Korkma"),
     Question(q: "Türkiye nin ilk CumhurBaşkanı Kimdir?", a: "Atatürk",a:"RTE",a:"Turgut Özal",a:"Konya"),
     Question(q: "99 depremi ne zaman olmuştur?",a: "1990",a:"2009",a:"1999",a:"1998"),
     Question(q:"Çin Seddi nerede inşaa edilmiştir?",a: "Japonya",a:"Çin",a:"Berlin",a:"Konya")]
    //    answerAll = []
    var questionNumber = 0
    
    func checkAnswer(_ userAnswer:String)-> Bool{
        if userAnswer == quiz[questionNumber].answer{
            return true
        }else{
            return false
        }
    }
    func getQuestion()->String{
        return quiz[questionNumber].text
    }
    func getProgress() -> Float {
        let progress = Float(questionNumber) / Float(quiz.count)
        return progress
    }
    mutating func nextQuestion(){
        if  questionNumber + 1 < quiz.count{
            questionNumber += 1
        }else{
            questionNumber = 0
        }
    }
}
// ------------------------------------------------------
// QUESTİON
import Foundation
struct Question{
    let text1:String
    var answer12 = [String:String]()
    var answer23 = [String:String]()
    init(q: String, a: String) {
        text1 = q
       a = answer23
        a = answer12
    }
}
// ------------------------------------------------------
//VİEWCONTROLLER
// quiz değişkeni oluşturdum questionNumber[1] ile çalıştırdığım zaman 1 tane soru gösteriyor buttonlara tıkladığımda hiçbirşey çalışmıyor.
// answer diye ayrı bir değişken oluştursam ve cevapları yazsam.! Button a tıkladığımda yanlışları ve doğruları göstermesi lazım buttonların.

import UIKit

class ViewController: UIViewController {
    @IBOutlet weak var scoreLabel: UILabel!
    
    @IBOutlet weak var questionLabel: UILabel!
    @IBOutlet weak var progressBar: UIProgressView!
    
    @IBOutlet weak var answer1: UIButton!
    @IBOutlet weak var answer2: UIButton!
    @IBOutlet weak var answer3: UIButton!
    @IBOutlet weak var answer4: UIButton!
    // PARAMETRE ÇAĞIRMAK İÇİN BAŞLANGICI BUNUNLA ATTIK
    var quizBrain = QuizBrain()
    
    var questionNumber = 0
    override func viewDidLoad() {
        super.viewDidLoad()
        updateUI()
}
    @IBAction func answerButtonPressed(_ sender: UIButton) {
        let userAnswer = sender.currentTitle

        let userGotItRight = quizBrain.checkAnswer(userAnswer!)
        if userGotItRight {
            sender.backgroundColor = UIColor.green
        }else{
            sender.backgroundColor = UIColor.red
        }
        quizBrain.nextQuestion()
        Timer.scheduledTimer(timeInterval: 0.2, target: self, selector: #selector(updateUI), userInfo: nil, repeats: false)
                
           }
    @objc func updateUI(){
        questionLabel.text = quizBrain.getQuestion()
        progressBar.progress = quizBrain.getProgress()
        scoreLabel.text = "Score\(quizBrain.getScore())"
        answer1.backgroundColor = UIColor.clear
        answer2.backgroundColor = UIColor.clear
        answer3.backgroundColor = UIColor.clear
        answer4.backgroundColor = UIColor.clear
    }
    
}

